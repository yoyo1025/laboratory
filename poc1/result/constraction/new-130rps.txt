tadanoyousei@TYMM4 k6 % k6 run ./combined.js

         /\      Grafana   /‾‾/  
    /\  /  \     |\  __   /  /   
   /  \/    \    | |/ /  /   ‾‾\ 
  /          \   |   (  |  (‾)  |
 / __________ \  |_|\_\  \_____/ 

     execution: local
        script: ./combined.js
        output: -

     scenarios: (100.00%) 1 scenario, 2000 max VUs, 1m5s max duration (incl. graceful stop):
              * pointcloud_upload: 130.00 iterations/s for 1m0s (maxVUs: 50-2000, exec: uploadScenario, gracefulStop: 5s)

WARN[0013] Request Failed                                error="Post \"http://localhost:8001/upload/prepare\": EOF"
WARN[0016] Request Failed                                error="Post \"http://localhost:8002/upload/prepare\": EOF"
WARN[0028] Request Failed                                error="Post \"http://localhost:8001/upload/prepare\": EOF"
WARN[0037] Request Failed                                error="Post \"http://localhost:8001/upload/prepare\": EOF"
WARN[0042] Request Failed                                error="Post \"http://localhost:8000/upload/prepare\": EOF"
WARN[0054] Request Failed                                error="Post \"http://localhost:8000/upload/prepare\": EOF"


  █ TOTAL RESULTS 

    checks_total.......: 15554  258.437252/s
    checks_succeeded...: 99.96% 15548 out of 15554
    checks_failed......: 0.03%  6 out of 15554

    ✗ upload prepare succeeded
      ↳  99% — ✓ 7774 / ✗ 6
    ✓ point cloud upload succeeded

    HTTP
    http_req_duration..............: avg=100.25ms min=1.53ms med=67.37ms  max=946.87ms p(90)=225.6ms  p(95)=289.59ms
      { expected_response:true }...: avg=100.28ms min=6.53ms med=67.42ms  max=946.87ms p(90)=225.62ms p(95)=289.65ms
    http_req_failed................: 0.03%  6 out of 15554
    http_reqs......................: 15554  258.437252/s

    EXECUTION
    dropped_iterations.............: 20     0.33231/s
    iteration_duration.............: avg=200.86ms min=1.76ms med=168.15ms max=1.01s    p(90)=370.99ms p(95)=446.31ms
    iterations.....................: 7780   129.268472/s
    vus............................: 25     min=8          max=69
    vus_max........................: 70     min=50         max=70

    NETWORK
    data_received..................: 7.0 MB 117 kB/s
    data_sent......................: 5.9 GB 98 MB/s




running (1m00.2s), 0000/0070 VUs, 7780 complete and 0 interrupted iterations
pointcloud_upload ✓ [======================================] 0000/0070 VUs  1m0s  130.00 iters/s

tadanoyousei@TYMM4 k6 % k6 run ./combined.js

         /\      Grafana   /‾‾/  
    /\  /  \     |\  __   /  /   
   /  \/    \    | |/ /  /   ‾‾\ 
  /          \   |   (  |  (‾)  |
 / __________ \  |_|\_\  \_____/ 

     execution: local
        script: ./combined.js
        output: -

     scenarios: (100.00%) 1 scenario, 2000 max VUs, 1m5s max duration (incl. graceful stop):
              * pointcloud_upload: 130.00 iterations/s for 1m0s (maxVUs: 50-2000, exec: uploadScenario, gracefulStop: 5s)

WARN[0013] Request Failed                                error="Post \"http://localhost:8001/upload/prepare\": EOF"
WARN[0016] Request Failed                                error="Post \"http://localhost:8002/upload/prepare\": EOF"
WARN[0028] Request Failed                                error="Post \"http://localhost:8001/upload/prepare\": EOF"
WARN[0037] Request Failed                                error="Post \"http://localhost:8001/upload/prepare\": EOF"
WARN[0042] Request Failed                                error="Post \"http://localhost:8000/upload/prepare\": EOF"
WARN[0054] Request Failed                                error="Post \"http://localhost:8000/upload/prepare\": EOF"


  █ TOTAL RESULTS 

    checks_total.......: 15554  258.437252/s
    checks_succeeded...: 99.96% 15548 out of 15554
    checks_failed......: 0.03%  6 out of 15554

    ✗ upload prepare succeeded
      ↳  99% — ✓ 7774 / ✗ 6
    ✓ point cloud upload succeeded

    HTTP
    http_req_duration..............: avg=100.25ms min=1.53ms med=67.37ms  max=946.87ms p(90)=225.6ms  p(95)=289.59ms
      { expected_response:true }...: avg=100.28ms min=6.53ms med=67.42ms  max=946.87ms p(90)=225.62ms p(95)=289.65ms
    http_req_failed................: 0.03%  6 out of 15554
    http_reqs......................: 15554  258.437252/s

    EXECUTION
    dropped_iterations.............: 20     0.33231/s
    iteration_duration.............: avg=200.86ms min=1.76ms med=168.15ms max=1.01s    p(90)=370.99ms p(95)=446.31ms
    iterations.....................: 7780   129.268472/s
    vus............................: 25     min=8          max=69
    vus_max........................: 70     min=50         max=70

    NETWORK
    data_received..................: 7.0 MB 117 kB/s
    data_sent......................: 5.9 GB 98 MB/s




running (1m00.2s), 0000/0070 VUs, 7780 complete and 0 interrupted iterations
pointcloud_upload ✓ [======================================] 0000/0070 VUs  1m0s  130.00 iters/s

tadanoyousei@TYMM4 poc1 % make count-ply
docker run --rm \
          -v edge1-minio-data:/data \
          alpine \
          sh -c 'cd /data/edge1-point-cloud/xn1vqhzy/uploads && for d in *; do [ -d "$d" ] && echo "$d"; done | wc -l'
2631
docker run --rm \
          -v edge2-minio-data:/data \
          alpine \
          sh -c 'cd /data/edge2-point-cloud/xn1vqhzy/uploads && for d in *; do [ -d "$d" ] && echo "$d"; done | wc -l'
2565
docker run --rm \
          -v edge3-minio-data:/data \
          alpine \
          sh -c 'cd /data/edge3-point-cloud/xn1vqhzy/uploads && for d in *; do [ -d "$d" ] && echo "$d"; done | wc -l'
2578